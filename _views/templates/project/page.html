{% extends "species/article.html" %}

{# STYLES #}
{% set body_styles = "project" %}
{% set grid = "grid grid-cols-12 gap-2 md:gap-4" %}
{% set heading_styles = "" %}
{% set copy_styles = "font-thin text-lg sm:text-xl leading-tight text-wrap prose text-pretty" %}

{% set title = [project.Name, project.Title] | join(": ") %}
{% block accessibility %}
<a href="#introduction">introduction</a>
<a href="#details">details</a>
<a href="#body">body</a>
{% endblock %} 
<!-- WE DON'T NEED ANOTHER HERO -->
{% block hero %}
<section class="px-4 sm:px-12">
  <div class="breadcrumbs">
    <ul class="place-content-center md:place-content-start">
      <li><a href="/projects/">Work</a></li>
      {% for category in ia | find("id", project.Category ) %} 
      <li><a href="/projects/types/{{ category.Slug | slugify }}">{{ category.Title }}</a></li>
      {% endfor %}
      <li>Projects</li>
    </ul>
  </div>
  <h1>{{ project.Title }}</h1>
  <!-- HERE BE PROJECT METADATA -->
  <section id="details" class="w-full md:grid md:grid-cols-6 py-12 gap-4 space-y-4">
    {% include "templates/project/supplemental-info.html" %}
    <!-- EXPLORE -->
    {% if project.URL %}
    <a class="circle mx-auto my-4 sm:my-12 md:my-0 md:row-span-full md:col-start-6" href="{{ project.URL }}">View â¤´</a>
    {% endif %}
  </section>
</section>
{% endblock %}
{% block content %}
  <!-- BODY COPY -->
  <section id="description" class="description max-w-360 mx-auto mb-4 px-4 sm:px-12 lg:flex lg:justify-center lg:space-x-12 space-y-12 lg:space-y-0">
    <figure id="introduction" class="introduction">
      {% if project.Description is string %}
      {{ project.Description | markdownify | safe }}
      {% endif %}
    </figure>
    <!-- RECOGNITION -->
    {% if project.Recognition %}
    <figure id="recognition" class="shrink-0 my-8 md:my-0 lg:basis-1/3 mb:4 md:grid md:grid-cols-2 lg:grid-cols-1">
      {% for award in awards | find("id", project.Recognition) %}
        {% include "templates/award/link_detailed.html" %}
      {% endfor %} 
    </figure>
    {% endif %}
  </section>
  <!-- LEAD VIDEO -->
  {% if project.Videos %}
  <section id="video" class="w-full max-w-360 mx-auto">
    {% for video in videos | find("id", project.Videos) %}
    {% include "templates/video/embed.html" %}
    {% endfor %}
  </section>
  {% endif %}
  <!-- NUGGETS -->
  <section id="nuggets" class="prose px-6 mx-auto py-12">
    {% for nugget in nuggets | find('id', project.Nuggets) %}
      {% include "templates/nugget/block.html" %}
    {% endfor %}
  </section>
{% endblock %}
{% block footer %}
<!-- RELATED -->
{% set category = ia | find("id", project.Category ) %}
{% set id = project.id %}
<figure id="related" class="{{ section_styles }} md:grid md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4">
  <figcaption class="heading">Other {{ category[0].Title }}</figcaption>
  {% set set = projects | find("id", category[0].Projects) %}
  {% for project in set %}
  {% if (project.Published) and (project.id != id) and (project.Weight <= 5) %}
  {% include "templates/project/card-md.html" %}
  {% endif %}
  {% endfor %}
</figure>
{% endblock %}