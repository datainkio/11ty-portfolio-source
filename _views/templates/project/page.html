{% extends "species/article.html" %}
{% set title = [project.Name, project.Title] | join(": ") %}
{% block accessibility %}
<a href="#introduction">introduction</a>
<a href="#details">details</a>
<a href="#body">body</a>
<a href="#nuggets">nuggets</a>
<a href="#examples">examples</a>
{% endblock %} 
<!-- WE DON'T NEED ANOTHER HERO -->
{% block hero %}
<section class="bg-black p-12 pb-20">
  <div class="pb-8">
    <h1 class="text-white font-black text-center md:text-left">{{ project.Title }}</h1>
    <p id="introduction" class="text-white text-center md:text-left md:text-2xl font-extralight">{{ project.Teaser }}</p>
  </div>
  <!-- HERE BE PROJECT METADATA -->
  <section id="details" class="text-center md:text-left md:flex md:flex-wrap gap-4">
    {% set figcaption_styles = "text-slate-400" %}
    {% set link_styles = "text-white text-med font-light" %}

    <!-- COMPANY -->
    {% if project.Organization %}
    <figure>
      <figcaption class="{{ figcaption_styles }}">Company/Client</figcaption>
      <ul>
        {% for organization in organizations | find('id', project.Organization) %}
        <li>{% include "templates/organization/link.html" %}</li>
        {% endfor %}
      </ul>
    </figure>
    {% endif %}

    <!-- ROLE -->
    {% if project.Role %}
    <figure>
      <figcaption class="{{ figcaption_styles }}">Roles</figcaption>
      <ul>
        {% for role in roles | find('id', project.Role) %}
        <li>{% include "templates/role/link.html" %}</li>
        {% endfor %}
      </ul>
    </figure>
    {% endif %}

    <!-- ACTIITIES -->
    {% if project.Activities %}
    <figure>
      <figcaption class="{{ figcaption_styles }}">Activities</figcaption>
      <ul class="list-none pl-0">
        {% for activity in activities | find('id', project.Activities) %}
        <li class="{{ link_styles }}">{{ activity.Name }}</li>
        {% endfor %}
      </ul>
    </figure>
    {% endif %}

    <!-- RECOGNITION -->
    {% if project.Recognition %}
    <figure>
      <figcaption class="{{ figcaption_styles }}">Recognition</figcaption>
      {% set link_styles = "text-white" %}
      <ul>
        {% for award in awards | find('id', project.Recognition) %}
        {% include "templates/award/link_detailed.html" %}
        {% endfor %}
      </ul>
    </figure>
    {% endif %}
    <!-- EXPLORE -->
    {% if project.URL %}
    <a class="btn btn-outline text-white border-white w-32" href="{{ project.URL }}">View</a>
    {% endif %}
  </section>
</section>
{% endblock %}
{% block content %}
<div class="md:grid md:grid-cols-2">
  <!-- LEAD VIDEO -->
  {% if project.Videos %}
  {{ project.Videos | youtube(project.Title) | safe }}
  {% endif %}
  <!-- BODY COPY -->
  <section id="body" class="p-12 prose md:col-start-1">
    {% if project.Description is string %}
    {{ project.Description | markdownify | safe }}
    {% endif %}
  </section>
  <!-- NUGGETS -->
  <section id="nuggets" class="prose p-12 md:col-start-1 md:row-start-2">
    {% for nugget in nuggets | find('id', project.Nuggets) %}
      <h2>{{ nugget.Name }}</h2>
      {% if nugget.Description is string %}
        {{ nugget.Description | markdownify | safe }}
      {% endif %}
      {% for image in images | find('id', nugget.Images) %}
        {% include "templates/image/modal.html" %}
      {% endfor %}
    {% endfor %}
  </section>
  <!-- IMAGE GALLERIES -->
  <section id="examples" class="object-top md:col-start-2 md:row-span-2">
    {% for gallery in galleries | find("id", project.Galleries) %}
      {% set data = gallery %}
      {% include "templates/gallery/carousel.html" %}
      {% if loop.last %}{% else %}
        <div class="divider h-8"></div> 
      {% endif %}
    {% endfor %}
  </section>
</div>
{% endblock %}